# Файловая система
Файловая система (ФС) — архитектура хранения данных, которые могут находиться в разделах жесткого диска и ОП. Выдает пользователю доступ к конфигурации ядра. Определяет, какую структуру принимают файлы в каждом из разделов, создает правила для их генерации, а также управляет файлами в соответствии с особенностями каждой конкретной ФС.

Самостоятельно необходимо ознакомиться с [Структура и типы файловых систем в Linux](https://selectel.ru/blog/directory-structure-linux/)

### Способы работы с ФС
1. Каким образом можно работать с ФС?
2. В чем +- каждого из способов?

### Ссылки в Linux

Символические и жесткие ссылки - это особенность файловой системы Linux, которая позволяет размещать один и тот же файл в нескольких директориях. Это очень похоже на ярлыки в Windows, так как файл на самом деле остается там же где и был, но вы можете на него сослаться из любого другого места.

В Linux существует два типа ссылок на файлы. Это символические и жесткие ссылки Linux. Они очень сильно отличаются и каждый тип имеет очень важное значение. В этой небольшой статье мы рассмотрим чем же отличаются эти ссылки, зачем они нужны, а также как создавать ссылки на файлы в Linux.

#### СИМВОЛИЧЕСКИЕ ССЫЛКИ

Символические ссылки более всего похожи на обычные ярлыки. Они содержат адрес нужного файла в вашей файловой системе. Когда вы пытаетесь открыть такую ссылку, то открывается целевой файл или папка. Главное ее отличие от жестких ссылок в том, что при удалении целевого файла ссылка останется, но она будет указывать в никуда, поскольку файла на самом деле больше нет.

Вот основные особенности символических ссылок:

- Могут ссылаться на файлы и каталоги;
- После удаления, перемещения или переименования файла становятся недействительными;
- Права доступа и номер inode отличаются от исходного файла;
- При изменении прав доступа для исходного файла, права на ссылку останутся неизменными;
- Можно ссылаться на другие разделы диска;
- Содержат только имя файла, а не его содержимое.

#### ЖЕСТКИЕ ССЫЛКИ
Этот тип ссылок реализован на более низком уровне файловой системы. Файл размещен только в определенном месте жесткого диска. Но на это место могут ссылаться несколько ссылок из файловой системы. Каждая из ссылок - это отдельный файл, но ведут они к одному участку жесткого диска. Файл можно перемещать между каталогами, и все ссылки останутся рабочими, поскольку для них неважно имя. Рассмотрим особенности:

- Работают только в пределах одной файловой системы;
- Нельзя ссылаться на каталоги;
- Имеют ту же информацию inode и набор разрешений что и у исходного файла;
- Разрешения на ссылку изменяться при изменении разрешений файла;
- Можно перемещать и переименовывать и даже удалять файл без вреда ссылке.

[Подбробнее про ссылки](https://losst.ru/simvolicheskie-i-zhestkie-ssylki-linux)

#### HTOP

htop — продвинутый монитор процессов, написанный для Linux. Он был задуман заменить стандартную программу top. Htop показывает динамический список системных процессов, список обычно выравнивается по использованию ЦПУ. В отличие от top, htop показывает все процессы в системе. Также показывает время непрерывной работы, использование процессоров и памяти. Htop часто применяется в тех случаях, когда информации даваемой утилитой top недостаточно, например при поиске утечек памяти в процессах. Htop написан на языке Си и использует для отображения библиотеку Ncurses.
[подробнее](http://linux-bash.ru/menusistem/79-htop.html)

## Функции работы с ФС
[filesize](https://www.php.net/manual/ru/function.filesize.php) — Возвращает размер файла 

Возвращает размер указанного файла в байтах или false (и генерирует ошибку уровня E_WARNING) в случае возникновения ошибки.

```php
filesize(string $filename): int|false


$filename = 'somefile.txt';
echo 'Размер файла ' . $filename . ': ' . filesize($filename) . ' байтов';
```

[fopen](https://www.php.net/manual/ru/function.fopen.php) - Открывает файл или URL. fopen() закрепляет именованный ресурс, указанный в аргументе filename, за потоком.

## ДЗ

1. Написать функцию, которая рекурсивно выведет на экран содержимое каталога. 
Функция принимает аргументом строку абсолютный путь к каталогу, 
который необходимо просканировать. 

```shell
d - директория
f - файл
```
отсупы необходимо сохранить, чтобы при отображении было понятно структуру вложенности

```shell
/var/www/data
--------------
d public
  d assets
    f style.css
    f script.js
d templates
  f index.html
f index.php
f composer.json
f composer.lock
```

`* Дополнительная задача со звездочкой. Используя табуляцию (отступы) отобразить права файла (в формате 644) и занимаемый размер на диске по файлу/каталогу (байты/килобайты)`

PS. Аргументы скрипт должен принимать с CLI. Например:
```shell
php index.php '/var/www/data'
```

2. Староста ведет учет оценок по всем студентам и по всем экзаменам в csv файле. 
```shell
ФИО;Предмет;Оценка
Иванов;Химия;5
Петров;Математика;4
Сидоров;Физика;5
...
```
Написать функцию, которая создаст файлы `Отличники.csv, Хорошисты.csv, Троешники.csv, Пересдача.csv`и запишет в следующие файлы соответсвующие названию данные.

Отличники - все 5
```shell
ФИО
Иванов
Сидоров
...
```
Хорошисты - есть хоть одна 4 (оценки 4 и 5 только). Файл отсортирован по фамилии
```shell
ФИО;Предмет;Оценка
Петров;Химия;5
Петров;Математика;4
...
```
Троешники - есть хоть одна 3 (3, 4, 5 оценки). Файл отсортирован по наименьшему колчеству 3
```shell
ФИО;Предмет;Оценка
Петров;Химия;5
Петров;Математика;4
Петров;Физика;3
...
```
Пересдача - есть 2. Файл отсортирован по предмету и содержит только оценки 2
```shell
Предмет;ФИО;Оценка
Химия;Петров;2
Химия;Иванов;2
Математика;Сидоров;2
...
```
Функция прнимает 2 аргумента - 1) путь к изначальному файлу с оценкам 2) директорию в которой будут созданы файлы результаты

PS. Аргументы скрипт должен принимать с CLI. Например:
```shell
php index.php '/var/www/data.csv' '/var/www/resultDir'
```
